########################### User data ###########################

## System:  	WOD
## User:    	{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}
## Pass:    	yuH@PW&@MrjV
## Home:    	/usr/sap/interfaces/SFTP_DIR/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}

################################################################

################### Before CAMP user created ###################

mkdir -p /usr/sap/interfaces/SFTP_DIR/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}
chmod -R 770 /usr/sap/interfaces/SFTP_DIR/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}

#################### After CAMP user created ####################

chown -R {SFTP_Intermediate_DEV,SFTP_Intermediate_QA}:sapsys /usr/sap/interfaces/SFTP_DIR/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}

#################### Public key installition ####################

mkdir -p /usr/sap/interfaces/sshkeys/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}/.ssh/
chmod -R 700 /usr/sap/interfaces/sshkeys/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}
chown -R {SFTP_Intermediate_DEV,SFTP_Intermediate_QA}:sapsys /usr/sap/interfaces/sshkeys/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDGQeWEJcUx43OxqNI7+o9BRH5Zv8RAs7Epl/1UxbAbbEVmNBnTA129YnIr/TlCcbyolCnaVjNeeMyp/LLTV5fTC8xJj/DuhfR56OyTGFXHER9lagaKEeqNh6eTFiMcsIUtDen97z4qZKo+jpCnw1VQ/ldWlKNdsD29omTkdZnQqfAjUiU3lhQFq9+97tQxW148PnpcznDB1yl+blyEe3IiYdFvShP8lfa868zNExkgqswA2mc8c2590Vmk89rxTz3nsZ7Y0i6AFs7MtXXHh2+wTW1hF/dzq/WU+OA0VMQuZKzqrrXUmCDbCwuzvJDds0fTQkTPCtjyeX2SJ4VVIBOBcEvXd9j4AI5tf0JYF3g1Q8F/sfzBXtmsDNK4OHoudIkj1+Cop+5zoRNFSjsTaIBJvb9Aj8HADDuro+dHMmewqLnLon1Tw9oxqKJlCdsAmtvkgI43hADGp9guxrF67ygJpd04UkSpGm/idJtNCkF20xbb8qa5jIwNf+kTez9ON85XrjDvXBLKnvWs0dCeIhhFY9E+UwBNz97GI6y0s8xPwIJOC3aigAXPi9pMZN+zp3oNJ3q3IbJhyXtsVY2Vkr+DA/BhweAqA+wN7Qbx6eK7ZfdeiSfUgxJEe4b0oKgvXGeHRI6Sf5QCQ7GPB3Dw7EfpOTCV9sg1ustv/RTfNs2usQ==" >> /usr/sap/interfaces/sshkeys/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}/.ssh/authorized_keys
chmod 644 /usr/sap/interfaces/sshkeys/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}/.ssh/authorized_keys
chown {SFTP_Intermediate_DEV,SFTP_Intermediate_QA}:sapsys /usr/sap/interfaces/sshkeys/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}/.ssh/authorized_keys

###################### Check user creation ######################

printf '\n' && getent passwd | grep {SFTP_Intermediate_DEV,SFTP_Intermediate_QA} && ll /usr/sap/interfaces/SFTP_DIR/ | grep {SFTP_Intermediate_DEV,SFTP_Intermediate_QA} && ll /usr/sap/interfaces/sshkeys/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}/.ssh/authorized_keys | grep {SFTP_Intermediate_DEV,SFTP_Intermediate_QA} && grep  "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDGQeWEJcUx43OxqNI7+o9BRH5Zv8RAs7Epl/1UxbAbbEVmNBnTA129YnIr/TlC" /usr/sap/interfaces/sshkeys/{SFTP_Intermediate_DEV,SFTP_Intermediate_QA}/.ssh/authorized_keys && printf '\n'

